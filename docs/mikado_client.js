import{a as lt}from"./chunk-YZJ6BJJJ.js";import{a as q}from"./chunk-AP7XD5YO.js";import{a as H}from"./chunk-YBESIRDJ.js";import{e as ht,h as X}from"./chunk-BZFIDKTD.js";{let t=function(d,m){m||(m=d.type);let g=d.target,a=g,f=g["_event_"+m];if(f)a=g["_root_"+m];else{for(;a!==n;){if(m==="click"&&c&&(f=a.getAttribute("tap")),f||(f=a.getAttribute(m)),f){let k=f.indexOf(":");if(k!==-1){let _=f.substring(0,k),A=f.substring(k+1);for(f=0,a=a.parentElement;a!==n;){if(a.hasAttribute(A)){f=_;break}a=a.parentElement}}break}a=a.parentElement}if(!f)return;g["_event_"+m]=f,g["_root_"+m]=a}let u=s[f],x=o[f];!u||(x.cancel!==!1&&d.preventDefault(),u(a,d,g)),x.stop!==!1&&d.stopPropagation()},e=function(d,m,g,a){if(m==="tap"){if(r||h)return void w(d);c=!0,m="click"}window[(d?"add":"remove")+"EventListener"](m,g,a||!1)},i={},s={},o={},n=document.documentElement||document.body.parentNode,r="ontouchstart"in window,h=!r&&window.PointerEvent&&navigator.maxTouchPoints,c;l.route=l.prototype.route=function(d,m,g){return s[d]=m,o[d]=g||{},this},l.dispatch=l.prototype.dispatch=function(d,m,g,a){return s[d].call(this,m,g,a),this};let p,y,w;if(r||h){let d=function(f){g(f,f.touches)},m=function(f){let u=p,x=y;g(f,f.changedTouches),50>Math.abs(p-u)&&50>Math.abs(y-x)&&t.call(this,f,"tap")},g=function(f,u){u&&(f=u[0]),p=f.clientX,y=f.clientY},a={passive:!1,capture:!0};w=function(f){e(f,h?"pointerdown":"touchstart",d,a),e(f,h?"pointerup":"touchend",m,a)}}l.listen=l.prototype.listen=function(d,m){return i[d]||(e(1,d,t,m),i[d]=1),this},l.unlisten=l.prototype.unlisten=function(d,m){return i[d]&&(e(0,d,t,m),i[d]=0),this}}{let t=function(e,i,s,o,n,r){if(e[r]=o,e[n]=s,i){let h=i[n];i[n]=i[r],i[r]=h}};l.prototype.move=function(e,i){let s;return typeof e=="number"?(s=e,e=this.dom[s]):s=this.index(e),0>i&&(i=this.length+i-1),s!==i&&this.shift(e,i-s),this},l.prototype.shift=function(e,i,s){if(!i)return this;let o;typeof e=="number"?(o=e,e=this.dom[e]):o=this.index(e);let n=0>i;if(n&&o||!n&&o<this.length-1){let r=n?Math.max(o+i,0):Math.min(o+i,this.length-1),h=this.dom[r],c=n&&1<o-r||!n&&1<r-o;if(!c&&this.reuse&&(this.store||this.loose)){let p=this.store?this.store[o]:e._data;this.update(e,this.store?this.store[r]:h._data,s,r),this.update(h,p,s,o)}else this.root.insertBefore(e,n?h:this.dom[r+1]||null);if(c){let p=this.dom[o],y=this.store&&this.store[o],w;if(n)for(let d=o;d>r;d--)w=this.dom[d]=this.dom[d-1],this.store&&(this.store[d]=this.store[d-1]);else for(let d=o;d<r;d++)w=this.dom[d]=this.dom[d+1],this.store&&(this.store[d]=this.store[d+1]);w=this.dom[r]=p,this.store&&(this.store[r]=y)}else t(this.dom,this.store,e,h,r,o)}return this},l.prototype.up=function(e,i){return(!i||0<i)&&this.shift(e,-(i||1)),this},l.prototype.down=function(e,i){return(!i||0<i)&&this.shift(e,i||1),this},l.prototype.first=function(e){return this.shift(e,-this.length)},l.prototype.last=function(e){return this.shift(e,this.length)},l.prototype.before=function(e,i){return typeof e!="number"&&(e=this.index(e)),typeof i!="number"&&(i=this.index(i)),i!==e+1&&(0>i&&(i=this.length+i,0>e&&i--),0>e&&(e=this.length+e-1),this.shift(e,i-e-1)),this},l.prototype.after=function(e,i){return typeof e!="number"&&(e=this.index(e)),typeof i!="number"&&(i=this.index(i)),i!==e-1&&(0>i&&(i=this.length+i-2,0>e&&i++),0>e&&(e=this.length+e-1),this.shift(e,i-e+1)),this},l.prototype.swap=function(e,i,s){if(e!==i){let o,n;if(typeof e=="number"?(o=e,e=this.dom[e]):o=this.index(e),typeof i=="number"?(n=i,i=this.dom[i]):n=this.index(i),this.reuse&&(this.store||this.loose)){let r=this.store?this.store[o]:e._data;this.update(e,this.store?this.store[n]:i._data,s,o),this.update(i,r,s,n)}else{let r=o+1!==n;if(this.root.insertBefore(r?e:i,r?i:e),r&&n+1!==o&&this.root.insertBefore(i,this.dom[o+1]||null),this.dom[o]=i,this.dom[n]=e,this.store&&!this.extern){let h=this.store[n];this.store[n]=this.store[o],this.store[o]=h}}}return this}}var{localStorage:I}=window;l.prototype.export=function(){let t;if(this.store)t=this.store;else if(this.loose){t=Array(this.length);for(let e=0;e<this.length;e++)t[e]=this.dom[e]._data}return t&&I.setItem(this.template,JSON.stringify(t)),this},l.prototype.import=function(){let t=I.getItem(this.template);return t&&(t=JSON.parse(t),this.store=t),this},l.prototype.delete=function(t){return I.removeItem(t||this.template),this};Object.assign||(Object.assign=function(){let t=arguments,e=t.length,i=t[0];for(let s,o,n,r=1;r<e;r++){s=t[r],o=Object.keys(s),n=o.length;for(let h,c=0;c<n;c++)h=o[c],i[h]=s[h]}return i}),Object.values||(Object.values=function(t){let e=Object.keys(t),i=e.length,s=Array(i);for(let o=0;o<i;o++)s[o]=t[e[o]];return s}),window.requestAnimationFrame||(window.requestAnimationFrame=window.setTimeout),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.clearTimeout),window.Promise||(window.Promise=function(){function t(e){this.callback=null;let i=this;e(function(s){i.callback&&(i.callback(s),i.callback=null)})}return t.prototype.then=function(e){this.callback=e},t}());var T=Array.prototype,F=window.Proxy,U=0;function v(t){if(!(this instanceof v))return new v(t);if(t instanceof v)return t;this.mikado=null;let e=t?t.length:0;if(F){if(e)for(let i=0;i<e;i++)this[i]=t[i];return this.length=e,this.proto={splice:T.splice.bind(this),pop:T.pop.bind(this),shift:T.shift.bind(this),unshift:T.unshift.bind(this),push:T.push.bind(this)},new Proxy(this,W)}this.proto=t||[];for(let i=0;i<=e;i++)z(this,i);U=e,z(this,"length")}function z(t,e){let i=e;Object.defineProperty(t,i,{get:function(){return this.proto[i]},set:function(s){typeof i=="number"&&(i===U&&z(this,++U),W.set(this,i,s))}})}var j=!1,W={set:function(t,e,i){let s;if(typeof e=="number")s=!0;else{let o=parseInt(e,10);e===""+o&&(e=o,s=!0)}if(!j){j=!0;let o=t.mikado;if(o&&!o.skip){let n=t.length;if(s){let r=o.length;if(n!==r&&(t.length=r),o.stealth&&t[e]===i)return j=!1,!0;let h=o.view;if(e>=r)o.add(i,h),t.length++;else if(e<r){let c=o.key,p=o.dom[e];o.reuse||c&&p._key===i[c]?o.update(p,i,h,e):o.replace(p,i,h,e)}if(o.proxy)return j=!1,!0}else e==="length"&&i<n&&o.remove(i,n-i)}j=!1}return(F?t:t.proto)[e]=i,!0}};v.prototype.set=function(t){return this.splice(),this.concat(t)},v.prototype.splice=function(t,e,i){j=!0,t||(t=0),typeof e=="undefined"&&(e=this.length-t,0>e&&(e=0)),e&&this.mikado.remove(t,e);let s=i?this.proto.splice(t,e,i):this.proto.splice(t,e);return i&&this.mikado.add(i,t,this.mikado.view),j=!1,s},v.prototype.push=function(t){j=!0,this.mikado.add(t,this.mikado.view),this.mikado.proxy||(this[this.length]=t),F&&this.length++,j=!1},v.prototype.unshift=function(t){j=!0,this.mikado.add(t,0,this.mikado.view),this.proto.unshift(t),j=!1},v.prototype.pop=function(){j=!0,this.mikado.remove(this.length-1);let t=this.proto.pop();return j=!1,t},v.prototype.shift=function(){j=!0,this.mikado.remove(0);let t=this.proto.shift();return j=!1,t},v.prototype.concat=function(t){let e=t.length;for(let i=0;i<e;i++)this.push(t[i]);return this},v.prototype.sort=T.sort,v.prototype.reverse=T.reverse,v.prototype.slice=T.slice,v.prototype.map=function(t,e){e&&(t=t.bind(this));for(let i=0,s=this.length;i<s;i++)this[i]=t(this[i]);return this},v.prototype.filter=function(t,e){e&&(t=t.bind(this));let i,s;for(let o=0,n=this.length;o<n;o++)t(this[o])?s&&(this.splice(i,s),n-=s,o-=s,s=0):s?s++:(i=o,s=1);return s&&this.splice(i,s),this},v.prototype.indexOf=function(t){for(let e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},v.prototype.lastIndexOf=function(t){for(let e=this.length-1;0<=e;e--)if(this[e]===t)return e;return-1},v.prototype.forEach=function(t){for(let e=0,i=this.length;e<i;e++)t(this[e])};var ct=!window.Proxy&&function(){function t(e,i){this.path=i.path,this.handler=i.handler;let s=Object.keys(e);for(let o=0,n=s.length;o<n;o++){let r=s[o];this.define(e,r,e[r])}return e}return t.prototype._proxy=!0,t.prototype.define=function(e,i,s){let o=this;Object.defineProperty(e,i,{get:function(){return s},set:function(n){s!==n&&(Y(o.handler,o.path,i,n),s=n)}})},t}(),pt={_text:function(t,e){t.nodeValue=e},_html:function(t,e){t.innerHTML=e},_class:function(t,e){t.className=e},_css:function(t,e){(t._style||(t._style=t.style)).cssText=e},_attr:function(t,e,i){t.setAttribute(i,e)}};function P(t,e,i){return new(ct||Proxy)(t,{path:e,handler:i,get:ut,set:ft})}function ut(t,e){return e==="_proxy"||t[e]}function ft(t,e,i){return t[e]!==i&&(Y(this.handler,this.path,e,i),t[e]=i),!0}function Y(t,e,i,s){let o=t["data."+i];if(o)for(let n,r=0,h=o.length;r<h;r++)n=o[r],pt[n[0]](e[n[1]],s,n[2]||i)}var{requestAnimationFrame:K,cancelAnimationFrame:dt}=window,mt={},N={},L={},B={},b={};function l(t,e,i){return this instanceof l?(!t.nodeType&&(i=e,e=t,t=null),t?this.mount(t):(this.dom=null,this.root=null,this.length=0),void this.init(e,i)):new l(t,e,i)}l.register=l.register=function(t,e){return e||(e=t,t=e.n),N[t]=e,l},l.prototype.mount=function(t){return this.root!==t&&(this.key&&this.root&&(this.root._pool=this.live,this.live=t._pool||{}),this.root=t,this.check(),this.dom=t._dom||(t._dom=Q(t.children)),this.length=this.dom.length),this},l.prototype.sync=function(t){if(this.root._dom=this.dom=Q(this.root.children),this.length=this.dom.length,t&&this.cache)for(let e=0;e<this.length;e++){let i=this.dom[e]._path;if(i)for(let s,o=0;o<i.length;o++)s=i[o],s._class=s._html=s._text=s._css=s._attr=null}return this},l.prototype.purge=function(){if(L[this.template+(this.cache?"_cache":"")]=null,this.key)if(this.length){let t=Object.keys(this.live);for(let e,i=0,s=t.length;i<s;i++)this.key[e=t[i]]||delete this.key[e]}else this.live={};return this.tpl_pool&&(this.tpl_pool=B[this.template]=[]),this.key_pool&&(this.key_pool=b[this.template]={}),this},l.prototype.index=function(t){return this.dom.indexOf(t)},l.prototype.node=function(t){return this.dom[t]},l.prototype.data=function(t){let e=typeof t=="object";return this.store?this.store[e?this.index(t):t]:(e?t:this.dom[t])._data},l.prototype.find=function(t){if(this.key){let e=typeof t=="object"?t[this.key]:t;return this.live[e]}for(let e=0;e<this.length;e++)if(this.data(e)===t)return this.dom[e]},l.prototype.search=function(t){let e=Object.values(t).join("^");for(let i=0;i<this.length;i++)if(Object.values(this.data(i)).join("^")===e)return this.dom[i]},l.prototype.where=function(t){let e=Object.keys(t),i=e.length,s=[];for(let o,n,r=0;r<this.length;r++){o=this.data(r),n=1;for(let h,c=0;c<i;c++)if(h=e[c],o[h]!==t[h]){n=0;break}n&&(s[s.length]=this.dom[r])}return s},l.prototype.init=function(t,e){typeof t=="string"?t=N[t]:(!e&&t&&!t.n&&(e=t,t=null),t?t.n&&l.register(t):t=N[this.template]),e||(e=this.config||{}),this.reuse=e.reuse!==!1,this.state=e.state||mt,this.cache=e.cache!==!1,this.async=e.async,this.timer=0,this.on=e.on;{let s=e.store||e.store!==!1;(this.extern=typeof s=="object")?e.store=!0:s&&(s=[]),(this.observe=s instanceof v)&&(s.mikado=this),this.skip=0,this.loose=!this.extern&&e.loose!==!1,this.store=!this.loose&&s}this.config=e;let i=t.n;if(this.template!==i){this.template=i,this.static=t.d,this.vpath=null,this.update_path=null,this.stealth=0,this.proxy=0,this.include=null,this.factory=e.prefetch!==!1&&this.parse(t),this.check(),this.key=t.k,this.live=this.key&&{};{let s=e.pool;this.tpl_pool=this.reuse&&s!==!1&&s!=="key"&&(B[i]||(B[i]=[])),this.key_pool=this.key&&s!==!1&&s!=="queue"&&(b[i]||(b[i]={})),this.size=this.tpl_pool&&e.size}}return this},l.once=l.once=function(t,e,i,s,o){let n=new l(t,e);if(typeof s=="function"&&(o=s,s=null),o){let r=o;o=function(){n.destroy(1),r()}}return n.render(i,s,o),o||n.destroy(1),l},l.prototype.check=function(){if(this.root){let t=this.root._tpl;t!==this.template&&(this.root._tpl=this.template,t&&(this.live={},this.remove(0,this.length)))}return this};function Q(t){let e=t.length,i=Array(e);for(let s,o=0;o<e;o++)s=t[o],i[o]=s;return i}l.prototype.create=function(t,e,i){let s=this.key,o=s&&t[s],n,r,h,c;if(!(s&&(r=this.key_pool)&&(n=r[o])))(n=this.tpl_pool)&&n.length?(n=n.pop(),r&&(n._index=null,r[n._key]=null)):n=h=this.factory||(this.factory=this.parse(N[this.template]));else if(c=1,!r)s=0;else if(r[o]=null,r=this.tpl_pool){let p=n._index;n._index=null;let y=r.pop();y!==n&&(y._index=p,r[p]=y)}if(c&&this.stealth&&!this.observe||this.apply(n,t,e,i),h){n=n.cloneNode(!0);let p;(p=this.on)&&(p=p.create)&&p(n)}return s&&(n._key=o,this.live[o]=n),n},l.prototype.apply=function(t,e,i,s){if(!this.static){e||(e=this.store?this.store[s]:t._data),this.update_path(t._path||this.create_path(t),!1,e,s,i);let o;return(o=this.on)&&(o=o.change)&&t!==this.factory&&o(t),this}},l.prototype.refresh=function(t,e){if(this.stealth)return this;let i;if(typeof t=="number"?i=this.dom[t]:e=t,i)return this.apply(i,null,e,t);let s=this.length,o=this.store;if(o&&this.loose)return this.store=null,this.render(o,e);let n=o?o.length:s,r=s<n?s:n;for(let h=0;h<r;h++)this.apply(this.dom[h],null,e,h);return this},l.prototype.render=function(t,e,i,s){if(!s){if(e&&typeof e!="object"&&(i=e,e=null),this.timer&&this.cancel(),i){let p=this;return this.timer=K(function(){p.timer=0,p.render(t,e,null,1),typeof i=="function"&&i()}),this}if(this.async){let p=this;return new Promise(function(y){p.timer=K(function(){p.timer=0,p.render(t,e,null,1),y()})})}}let o=this.length;if(!t){if(this.static)return this.dom[0]||this.add(),this;if(!(t=this.store))return this}let n=t.length;if(typeof n=="undefined")t=[t],n=1;else if(!n)return this.remove(0,o);let r=(this.key_pool||!this.reuse)&&this.key;r||this.reuse||(this.remove(0,o,n),o=0);let h=o<n?o:n,c=0;if(c<h)for(;c<h;c++){let p=this.dom[c],y=t[c];if(r&&p._key!==y[r])return this.reconcile(t,e,c,1);this.update(p,y,e,c)}if(c<n)for(;c<n;c++)this.add(t[c],e);else n<o&&this.remove(n,o-n);return this},l.prototype.reconcile=function(t,e,i,s){let o=!this.extern&&this.store;o&&(t||(t=o),this.store=0);let n=this.dom,r=this.live,h=t.length,c=n.length,p=c>h?c:h,y=0,w=this.key;for(i||(i=0);i<p;i++){let d;if(i<h){let m=t[i],g=i>=c,a,f,u;if(!g&&(a=n[i],f=m[w],u=a._key,u===f)){s&&this.update(a,m,e,i);continue}if(g||!r[f]){s&&(g||!this.key_pool?(c++,p=c>h?c:h,this.add(m,e,i)):this.replace(a,m,e,i));continue}let x,k;for(let _=i+1;_<p;_++)if(!x&&_<c&&n[_]._key===f&&(x=_+1),!k&&_<h&&t[_][w]===u&&(k=_+1),x&&k){if(x>=k){let A=n[x-1];this.root.insertBefore(A,a),s&&this.update(A,m,e,i),x==k?(1<_-i&&this.root.insertBefore(a,n[x]),n[i]=n[_],n[_]=a):(V(n,x-1,i),y++)}else{let A=k-1+y;this.root.insertBefore(a,n[A]||null),V(n,i,(A>c?c:A)-1),y--,i--}d=1;break}}d||(this.remove(i),c--,p=c>h?c:h,i--)}return o&&(this.store=t),this};function V(t,e,i,s){let o=s||t[e];if(s&&e++,e<i)for(;e<i;e++)t[e]=t[e+1];else for(;e>i;e--)t[e]=t[e-1];t[i]=o}l.prototype.add=function(t,e,i,s){let o;s||(typeof e=="number"?(i=e,e=null,o=1):(i||i===0)&&(o=1));let n=s||o?i:this.length,r=this.create(t,e,n);{let c;this.proxy&&(this.stealth&&this.loose&&r._data===t?c=1:t._proxy||(t=P(t,r._path||this.create_path(r),this.proxy))),c||(this.store?o&&!this.extern?V(this.store,this.length-1,n,t):(this.skip=1,this.store[n]=t,this.skip=0):this.loose&&(r._data=t))}o?(this.root.insertBefore(r,this.dom[n]),V(this.dom,this.length-1,n,r),this.length++):(s?this.root.replaceChild(r,s):(this.root.appendChild(r),this.length++),this.dom[n]=r);let h;return(h=this.on)&&(h=h.insert)&&h(r),this},l.prototype.clear=function(t){return this.length&&this.remove(0,this.length),t&&this.purge(),this},l.prototype.destroy=function(t){t&&this.unload(),this.length=0,this.dom=this.root=this.template=this.vpath=this.update_path=this.factory=null,this.live=null,this.store=null,this.include=null},l.prototype.cancel=function(){return this.timer&&(dt(this.timer),this.timer=null),this},l.prototype.append=function(t,e,i){let s;typeof e=="number"?(i=e,e=null,s=1):s=i||i===0;let o=t.length;for(let n=0;n<o;n++)this.add(t[n],e,s?i++:null);return this},l.prototype.remove=function(t,e,i){let s=this.length;if(t&&(typeof t=="object"?t=this.index(t):0>t&&(t=s+t-1)),!s||t>=s)return this;e?0>e&&(t-=e+1,0>t&&(t=0),e*=-1):e=1;let o;if(!t&&e>=s){if(this.store&&!this.extern&&(this.store=i?Array(i):[]),this.include&&(this.key_pool||this.tpl_pool))for(let r=0;r<this.include.length;r++)this.include[r].clear();o=this.dom,e=o.length,this.root.textContent="",this.root._dom=this.dom=i?Array(i):[],s=0}else this.store&&!this.observe&&this.store.splice(t,e),o=this.dom.splice(t,e),s-=e;let n;if((n=this.on)&&(n=n.remove))for(let r=0;r<e;r++)n(o[r]);this.length=s,this.tpl_pool&&!this.key_pool&&1<e&&gt(o);for(let r,h=0;h<e;h++)r=o[h],s&&this.root.removeChild(r),this.checkout(r);return this},l.prototype.checkout=function(t){if(this.key){let e=t._key;this.live[e]=null,this.key_pool&&(this.key_pool[e]=t)}if(this.tpl_pool){let e=this.tpl_pool.length;(!this.size||e<this.size)&&(this.key_pool&&(t._index=e),this.tpl_pool[e]=t)}},l.prototype.replace=function(t,e,i,s){typeof s=="undefined"&&(typeof t=="number"?(s=t,t=this.dom[s]):s=this.index(t));let o;if(this.key&&(o=this.live[e[this.key]])){if(this.stealth||e._proxy||this.apply(t,e,i,s),o!==t){let n=this.index(o);if(this.store){this.skip=1;let h=this.store[s];this.store[s]=e,this.store[n]=h,this.skip=0}if(this.dom[s]=o,this.dom[n]=t,n<s){let h=t;t=o,o=h}let r=t.nextElementSibling;this.root.insertBefore(t,o),r!==o&&this.root.insertBefore(o,r)}return this}return this.add(e,i,s,t),this.checkout(t),(o=this.on)&&(o=o.replace)&&o(t),this},l.prototype.update=function(t,e,i,s){if(typeof s=="undefined"&&(typeof t=="number"?(s=t,t=this.dom[t]):s=this.index(t)),this.proxy){if(this.stealth&&this.store[s]===e)return this;e._proxy||(e=P(e,t._path||this.create_path(t),this.proxy))}if(this.store?(this.skip=1,this.store[s]=e,this.skip=0):this.loose&&(t._data=e),this.key){let n=t._key,r=e[this.key];n!==r&&(this.live[n]=null,this.live[r]=t,t._key=r)}let o;return(o=this.on)&&(o=o.update)&&o(t),this.apply(t,e,i,s)},l.prototype.create_path=function(t){let e=this.vpath.length,i={},s=Array(e);for(let o,n=0;n<e;n++)o=this.vpath[n],s[n]=i[o]||at(t,o,i);return t._path=s,s};function at(t,e,i){for(let s=0,o=e.length,n="";s<o;s++){let r=e[s];n+=r,i[n]?t=i[n]:(r===">"?t=t.firstElementChild:r==="+"?t=t.nextElementSibling:r==="|"&&(t=t.firstChild),i[n]=t)}return t}var O;var yt;l.prototype.parse=function(t,e,i,s){if(!e){let u=L[t.n+(this.cache?"_cache":"")];if(u)return this.update_path=u.update_path,this.static=u.static,this.stealth=u.stealth,this.proxy=u.proxy,this.include=u.include,this.vpath=u.vpath,u.node}let o=document.createElement(t.t||"div");e||(e=0,i="&",O="",this.vpath=[],o._path=s=[],yt=o);let n=t.s,r=t.i,h=t.x,c=t.h,p=t.a,y=t.e,w=t.c,d=t.j,m=this.vpath.length,g=0,a=0,f="";if(d&&(f+=";"+d,-1<f.indexOf("self")&&(g=2)),t.f&&(O+=";if("+t.f+"){self.hidden=false",g=2),w)if(typeof w=="object"){let u=w[1];w=""+w[0],f+=this.cache&&!u?";v="+w+";if(self._class!==v){self._class=v;self.className=v}":w?";self.className="+w:"",u&&(S(this,w,["_class",m]),a++),g++}else o.className=w;if(p||y){let u;if(p&&(u=Object.keys(p)),y){let x=Object.keys(y);u=u?u.concat(x):x}for(let x=0;x<u.length;x++){let k=u[x],_;if((!p||typeof(_=p[k])=="undefined")&&(_=y[k],this.listen(k)),typeof _=="object"){let A=_[1];_=""+_[0],f+=this.cache&&!A?";v="+_+";var _a=self._attr||(self._attr={});if(_a['"+k+"']!==v){_a['"+k+"']=v;self[v||v===0?'setAttribute':'removeAttribute']('"+k+"',v)}":_?";v="+_+";self[v||v===0?'setAttribute':'removeAttribute']('"+k+"',v)":"",A&&(S(this,_,["_attr",m,k]),a++),g++}else o.setAttribute(k,_)}}if(n){if(typeof n=="string")o.style.cssText=n;else if(n.length){let u=n[1];n=n[0],f+=this.cache&&!u?";v="+n+";if(self._css!==v){self._css=v;(self._style||(self._style=self.style)).cssText=v}":n?";self.style.cssText="+n:"",u&&(S(this,n,["_css",m]),a++),g++}}if(t["@"]||t.r){this.include||(this.include=[]);let u=t["@"]||t.i;t["@"]||(u.n=t["@"]=this.template+"@"+this.include.length,t.i=null),r=null,f+=";this.include["+this.include.length+"].mount(self).render("+t.r+(t.m?".slice("+(0<=t.m?"0,"+t.m:t.m)+")":"")+",view)";let x=O;O="",this.include.push(new l(o,u,Object.assign({},this.config,{store:!1,async:0}))),O=x,g++}else if(!r){if(t["+"])r=N[t["+"]];else if(h){let u,x=typeof h=="object";x&&(u=h[1],h=""+h[0]);let k=document.createTextNode(h);if(x){g&&m++,this.vpath[m]=i+"|",s[m]=k;let _=this.cache&&!u?";v="+h+";if(self._text!==v){self._text=v;self.nodeValue=v}":h?";self.nodeValue="+h:"";Z(g,_,m,this.cache),u&&(S(this,h,["_text",m]),a++),g&&m--}o.appendChild(k)}else if(c)if(typeof c=="object"){let u=c[1];c=""+c[0],f+=this.cache&&!u?";v="+c+";if(self._html!==v){self._html=v;self.innerHTML=v}":c?";self.innerHTML="+c:"",u&&(S(this,c,["_html",m]),a++),g++}else o.innerHTML=c}if(g?(this.vpath[m]=i,s[m]=o,this.static=0,g==a&&(this.stealth=1),Z(g,f,m,this.cache)):f&&(O+=f),O+="",r){let u;if(r.length){let x=">";for(let k,_=0;_<r.length;_++)_&&(x+="+"),k=r[_],(u=k["+"])&&(k=N[u]),o.appendChild(this.parse(k,e+_+1,i+x,s))}else(u=r["+"])&&(r=N[u]),o.appendChild(this.parse(r,e+1,i+">",s))}if(t.f&&(O+="}else "+(1<g?"self":"p["+m+"]")+".hidden=true"),!e){!this.static&&O&&(this.update_path=Function("p","s","data","index","view",'"use strict";var self,v'+O));{let u={update_path:this.update_path,static:this.static,vpath:this.vpath,node:o};u.include=this.include,u.proxy=this.proxy,u.stealth=this.stealth,L[t.n+(this.cache?"_cache":"")]=u}}return o};function S(t,e,i){t.proxy||(t.proxy={}),(t.proxy[e]||(t.proxy[e]=[])).push(i)}function Z(t,e,i,s){O+=s||1<t?";self=p["+i+"]"+e:e.replace(/self/g,"p["+i+"]")}l.prototype.load=function(t,e){let i=this,s=new XMLHttpRequest;return s.overrideMimeType("application/json"),s.open("GET",t,e!==!1),s.onload=function(){let o=this.responseText;if(o){let n;try{let r=JSON.parse(o);l.register(r),i instanceof l&&i.init(r)}catch(r){n=r}typeof e=="function"&&e(n)}},s.send(),this},l.load=l.prototype.load,l.prototype.unload=function(t){return t?typeof t=="object"&&(t=t.n):t=this.template,t&&(N[t]=null,B[t]=b[t]=L[t]=null,L[t+"_cache"]=null),this},l.unregister=l.prototype.unregister=l.unload=l.prototype.unload;function gt(t){let e=t.length;for(let i,s=0;s<(0|e/2);s++)i=t[s],t[s]=t[e-s-1],t[e-s-1]=i;return t}l.prototype.mount,l.prototype.render;var $=ht(lt());var C={APP_ROOT:document.querySelector("[data-app]"),NUMBERS:{time:{min:64,max:128},values:{min:0,max:255}}},D=new $.default,R;function tt(t){return R=new Proxy(t,_t),R}function et(t=q,e=q){let i=e(R)||{};return D.sub("change",s=>t(s)),D.pub("change",R),s=>{Object.keys(i).forEach(o=>{s.route(o,i[o])})}}var _t={set(t,e,i){return t[e]=i,D.pub("change",t),!0}};var it={tap:1,change:1,click:1,dblclick:1,input:1,keydown:1,keypress:1,keyup:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mouseout:1,mouseover:1,mouseup:1,mousewheel:1,touchstart:1,touchmove:1,touchend:1,reset:1,select:1,submit:1,toggle:1,blur:1,error:1,focus:1,load:1,resize:1,scroll:1},J,st=0;function M(t,e){let i={};if(!e){if(J=!0,typeof t!="string")i.n=t.id||"tpl_"+st++;else if(t.indexOf("<")!==-1){let h=document.createElement("div");h.innerHTML=t,t=h.firstElementChild,i.n=t.id||"tpl_"+st++}else i.n=t,t=document.getElementById(t);t=t,t.content?t=t.content.firstElementChild:t.tagName==="TEMPLATE"&&(t=t.firstElementChild)}let s=t.tagName;if(s){if(s==="INCLUDE"){let h=t.getAttribute("from");return i["+"]=h||G(t.firstChild.nodeValue),i}s!=="DIV"&&(i.t=s.toLowerCase())}else{let h=t;if(h&&(h=h.nodeValue)&&(h=h.replace(/\s+/g," "),h&&h.trim())){let c=h.indexOf("{{@");if(c!==-1){let p=h.indexOf("}}",c);i.j=h.substring(c+3,p),h=h.substring(0,c)+h.substring(p+2)}h&&h.trim()&&(h.indexOf("{{#")===-1?E(i,"x",h):E(i,"h",h.replace(/{{#/g,"{{")))}return i.j||h&&h.trim()?i:null}let o=t.attributes;if(o.length)for(let h,c=0;c<o.length;c++)if(h=o[c].nodeName,h==="class")E(i,"c",t.className);else{let p=t.getAttribute(h);if(h==="style")E(i,"s",p);else if(h==="if")E(i,"f",p);else if(h==="include"){if(!t.hasAttribute("for")){let y={};(i.i||(i.i=[])).push(y),E(y,"+",p)}}else if(h==="for"&&s!=="LABEL"){let y=t.getAttribute("include");y&&(i["@"]=G(y)),E(i,"r",p)}else if(h==="max")E(i,"m",p);else if(h==="js")i.j=G(p);else if(h==="key")E(i,"k",p.replace("data.",""));else{if(h==="bind"){let y=p.split(":");2>y.length&&y.unshift("value"),h=y[0],p="{{=="+y[1]+"}}"}it[h.substring(2)]&&p.indexOf("{{")!==-1&&(h=h.substring(2)),it[h]?E(i.e||(i.e={}),h,p):E(i.a||(i.a={}),h,p)}}let n=t.childNodes,r=n.length;if(r){let h=0;for(let c=0;c<r;c++){let p=M(n[c],1);p&&(r===1&&n[c].nodeType===3?(p.j&&(i.j=p.j),p.h&&(i.h=p.h),p.x&&(i.x=p.x)):(i.i||(i.i=[]))[h++]=p)}h==1&&(i.i=i.i[0])}return e||(i.d=J),i}function E(t,e,i){if(i.indexOf("{{")!==-1&&i.indexOf("}}")!==-1){let s=i.indexOf("{{==")!==-1,o=s||i.indexOf("{{=")!==-1;J=!1;let n=i.replace(/{{==/g,"{{").replace(/{{=/g,"{{").replace(/"{{/g,"").replace(/}}"/g,"").replace(/{{/g,"' + ").replace(/}}/g," + '");t[e]=[("'"+n+"'").replace(/'' \+ /g,"").replace(/ \+ ''/g,"").trim()],s?t[e].push(2):o&&t[e].push(1)}else t[e]=i}function G(t){return t.replace(/{{/g,"").replace(/}}/g,"").trim()}var ot=M(`
  <span>
    <style>
    :scope brick {
      display: block;
      padding: .5em;
      border: 1px solid var(--shade1);
    }
    :scope brick.eql {
      background-color: #005;
    }
    :scope brick.up {
      background-color: #050;
    }
    :scope brick.down {
      background-color: #500;
    }
    </style>
    <brick class="{{ data.dir }}">
      {{ data.value }}
    </brick>
  </span>
`);ot.n="brick";var nt=ot;l.register(nt);var rt=M(`
  <client>
    <style>
    :scope spacer {
      display: block;
      margin: 0 0 2em;
    }
    :scope bricks {
      display: flex;
      justify-content: space-evenly;
    }
    :scope bricks > * {
      width: 3em;
      text-align: center;
    }
    </style>
    <h1>Mikado App Works!</h1>
    <spacer>
      <button click="toggle">{{ data.seeding ? 'Pause' : 'Play' }}</button>
    </spacer>
    <bricks include="brick" for="data.values"></bricks>
  </client>
`);X.debug("The Client script started!");var xt={seeding:!0,values:[]},kt={start(t){this.view=l(C.APP_ROOT,rt),this.state=tt(t),et(()=>{this.render()},()=>({toggle:()=>this.toggle()}))(this.view),this.step()},step(){if(this.state.seeding){let t=H(C.NUMBERS.time.min,C.NUMBERS.time.max);setTimeout(()=>{this.addRandomValue(),this.step()},t)}},addRandomValue(){let t=H(C.NUMBERS.values.min,C.NUMBERS.values.max);this.update(t)},update(t){let e=this.state.values[0]||{value:-1},i=[{value:t,dir:e.value===t?"eql":e.value<t?"up":"down"},...this.state.values];i.length>10&&(i=i.slice(0,10)),this.state.values=i},toggle(){this.state.seeding=!this.state.seeding,this.state.seeding&&this.step()},render(){this.view.render(this.state)}};kt.start(xt);
//# sourceMappingURL=mikado_client.js.map
