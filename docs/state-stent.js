import{a as Ee,b as _e,c as ce,d as J,e as Re}from"./chunk-NNA7JVGU.js";import"./chunk-A6OLRRAH.js";import"./chunk-MOOY4HSH.js";import"./chunk-UXVK5WZE.js";import{a as m,b as z,c as R,d as Qe,e as de}from"./chunk-Z3EDBJV3.js";var A=R(E=>{"use strict";E.__esModule=!0;var Ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r=E.ERROR_MISSING_MACHINE=function(t){return"There's no machine with name "+t},cr=E.ERROR_MISSING_STATE='Configuration error: missing initial "state"',Rr=E.ERROR_MISSING_TRANSITIONS='Configuration error: missing "transitions"',pr=E.ERROR_WRONG_STATE_FORMAT=function(t){var r=(typeof t=="undefined"?"undefined":Ze(t))==="object"?JSON.stringify(t,null,2):t;return'The state should be an object and it should always have at least "name" property. You passed '+r},Sr=E.ERROR_UNCOVERED_STATE=function(t){return"You just transitioned the machine to a state ("+t+") which is not defined or it has no actions. This means that the machine is stuck."},vr=E.ERROR_NOT_SUPPORTED_HANDLER_TYPE="Wrong handler type passed. Please read the docs https://github.com/krasimir/stent",Ar=E.ERROR_RESERVED_WORD_USED_AS_ACTION=function(t){return"Sorry, you can't use "+t+" as a name for an action. It is reserved."},Dr=E.ERROR_GENERATOR_FUNC_CALL_FAILED=function(t){return"The argument passed to `call` is falsy ("+t+")"},Mr=E.MIDDLEWARE_PROCESS_ACTION="onActionDispatched",yr=E.MIDDLEWARE_ACTION_PROCESSED="onActionProcessed",hr=E.MIDDLEWARE_STATE_WILL_CHANGE="onStateWillChange",Or=E.MIDDLEWARE_PROCESS_STATE_CHANGE="onStateChanged",Ir=E.MIDDLEWARE_GENERATOR_STEP="onGeneratorStep",mr=E.MIDDLEWARE_GENERATOR_END="onGeneratorEnd",Tr=E.MIDDLEWARE_GENERATOR_RESUMED="onGeneratorResumed",Nr=E.MIDDLEWARE_MACHINE_CREATED="onMachineCreated",Cr=E.MIDDLEWARE_MACHINE_CONNECTED="onMachineConnected",Lr=E.MIDDLEWARE_MACHINE_DISCONNECTED="onMachineDisconnected",gr=E.MIDDLEWARE_REGISTERED="onMiddlewareRegister",wr=E.DEVTOOLS_KEY="__hello__stent__"});var Se=R((T,pe)=>{"use strict";T.__esModule=!0;var $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};T.default=je;var ke=A();function je(e){if(e&&(typeof e=="undefined"?"undefined":$e(e))==="object"&&typeof e.name!="undefined")return e;throw new Error((0,ke.ERROR_WRONG_STATE_FORMAT)(e))}pe.exports=T.default});var Ae=R((N,ve)=>{"use strict";N.__esModule=!0;N.default=et;function et(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}ve.exports=N.default});var y=R((C,De)=>{"use strict";C.__esModule=!0;C.default=rt;var tt=L();function rt(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var a=tt.Machine.middlewares;if(a.length!==0){var _=function(f,d){return f<a.length-1?d(f+1):null};(function l(f){var d=a[f];d&&typeof d[e]!="undefined"&&d[e].apply(t,n),_(f,l)})(0)}}De.exports=C.default});var Q=R((g,ye)=>{"use strict";g.__esModule=!0;g.default=ft;var nt=Se(),at=B(nt),ot=Ae(),ut=B(ot),it=y(),Me=B(it),X=A();function B(e){return e&&e.__esModule?e:{default:e}}function ft(e,t){var r;if(typeof t!="undefined"){if(typeof t=="string"||typeof t=="number"?r={name:t.toString()}:r=(0,at.default)(t),typeof e.transitions[r.name]=="undefined"||(0,ut.default)(e.transitions[r.name]))throw new Error((0,X.ERROR_UNCOVERED_STATE)(r.name));(0,Me.default)(X.MIDDLEWARE_STATE_WILL_CHANGE,e),e.state=r,(0,Me.default)(X.MIDDLEWARE_PROCESS_STATE_CHANGE,e)}}ye.exports=g.default});var Te=R((w,me)=>{"use strict";w.__esModule=!0;var he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};w.default=Ie;var st=y(),D=Oe(st),v=A(),lt=Q(),dt=Oe(lt);function Oe(e){return e&&e.__esModule?e:{default:e}}function Ie(e,t,r,n){var o=function(i,s){return!l&&i.next(s)},a=function(i,s){return!l&&i.throw(s)},_=function(){f&&f(),l=!0},l=!1,f,d=function u(i){if(!l)if(i.done)(0,D.default)(v.MIDDLEWARE_GENERATOR_END,e,i.value),r(i.value);else if((0,D.default)(v.MIDDLEWARE_GENERATOR_STEP,e,i.value),he(i.value)==="object"&&i.value.__type==="call"){var s=i.value,c=s.func,se=s.args;if(!c){var le=(0,v.ERROR_GENERATOR_FUNC_CALL_FAILED)(typeof c=="undefined"?"undefined":he(c));return(0,D.default)(v.MIDDLEWARE_GENERATOR_RESUMED,e,le),u(a(t,new Error(le)))}try{var M=c.apply(void 0,se);if(!M){(0,D.default)(v.MIDDLEWARE_GENERATOR_RESUMED,e),u(o(t));return}if(typeof M.then!="undefined")M.then(function(S){return(0,D.default)(v.MIDDLEWARE_GENERATOR_RESUMED,e,S),u(o(t,S))},function(S){return(0,D.default)(v.MIDDLEWARE_GENERATOR_RESUMED,e,S),u(a(t,S))});else if(typeof M.next=="function")try{f=Ie(e,M,function(S){(0,D.default)(v.MIDDLEWARE_GENERATOR_RESUMED,e,S),u(o(t,S))})}catch(S){return u(a(t,S))}else(0,D.default)(v.MIDDLEWARE_GENERATOR_RESUMED,e,M),u(o(t,M))}catch(S){return u(a(t,S))}}else(0,dt.default)(e,i.value),(0,D.default)(v.MIDDLEWARE_GENERATOR_RESUMED,e),u(o(t))};return d(o(t,n)),_}me.exports=w.default});var k=R((q,Ne)=>{"use strict";q.__esModule=!0;var Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};q.default=vt;var W=A(),ct=Q(),G=$(ct),Rt=y(),Z=$(Rt),pt=Te(),St=$(pt);function $(e){return e&&e.__esModule?e:{default:e}}function vt(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];var a=e.state,_=e.transitions;if(!_[a.name])return!1;var l=_[a.name][t];if(typeof l=="undefined")return!1;if(Z.default.apply(void 0,[W.MIDDLEWARE_PROCESS_ACTION,e,t].concat(n)),typeof l=="string")(0,G.default)(e,_t({},a,{name:_[a.name][t]}));else if((typeof l=="undefined"?"undefined":Et(l))==="object")(0,G.default)(e,l);else if(typeof l=="function"){var f,d=(f=_[a.name])[t].apply(f,[e].concat(n));if(d&&typeof d.next=="function"){var u=d;return(0,St.default)(e,u,function(i){(0,G.default)(e,i),Z.default.apply(void 0,[W.MIDDLEWARE_ACTION_PROCESSED,e,t].concat(n))})}else(0,G.default)(e,d)}else throw new Error(W.ERROR_NOT_SUPPORTED_HANDLER_TYPE);Z.default.apply(void 0,[W.MIDDLEWARE_ACTION_PROCESSED,e,t].concat(n))}Ne.exports=q.default});var Le=R((P,Ce)=>{"use strict";P.__esModule=!0;P.default=yt;var At=k(),Dt=Mt(At);function Mt(e){return e&&e.__esModule?e:{default:e}}var j={};function yt(e,t){j[t]&&j[t]();for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];j[t]=Dt.default.apply(void 0,[e,t].concat(n))}Ce.exports=P.default});var we=R((U,ge)=>{"use strict";U.__esModule=!0;var ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};U.default=ht;var te=A();function ht(e){if((typeof e=="undefined"?"undefined":ee(e))!=="object")throw new Error(te.ERROR_MISSING_STATE);var t=e.state,r=e.transitions;if((typeof t=="undefined"?"undefined":ee(t))!=="object")throw new Error(te.ERROR_MISSING_STATE);if((typeof r=="undefined"?"undefined":ee(r))!=="object")throw new Error(te.ERROR_MISSING_TRANSITIONS);return!0}ge.exports=U.default});var Ge=R((H,We)=>{"use strict";H.__esModule=!0;var Ot=/^[\W_]+/,It=/[\W_]+/g;H.default=function(e){return e.replace(Ot,"").split(It).reduce(function(t,r,n){return n===0?r=r.charAt(0).toLowerCase()+r.substr(1):r=r.charAt(0).toUpperCase()+r.substr(1),t+=r,t},"")};We.exports=H.default});var Pe=R((b,qe)=>{"use strict";b.__esModule=!0;b.default=Lt;var mt=Ge(),re=Nt(mt),Tt=A();function Nt(e){return e&&e.__esModule?e:{default:e}}var Ct=["name","transitions","state","destroy"];function Lt(e,t,r,n){for(var o in t){(function(f){e[(0,re.default)("is "+f)]=function(){return e.state.name===f}})(o);for(var a in t[o]){var _=(0,re.default)(a),l=(0,re.default)("is "+a+" allowed");if(Ct.indexOf(_)>=0)throw new Error((0,Tt.ERROR_RESERVED_WORD_USED_AS_ACTION)(_));(function(f,d,u){e[f]=function(){for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return r.apply(void 0,[u].concat(s))},e[f].latest=function(){for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return n.apply(void 0,[u].concat(s))},e[d]=function(){return!t[e.state.name]||typeof t[e.state.name][u]!="undefined"}})(_,l,a)}}}qe.exports=b.default});var be=R((F,He)=>{"use strict";F.__esModule=!0;var gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};F.default=Ft;var wt=k(),Wt=x(wt),Gt=Le(),qt=x(Gt),Pt=we(),Ut=x(Pt),Ht=Pe(),bt=x(Ht);function x(e){return e&&e.__esModule?e:{default:e}}var xt=0,Ue=function(){return"_@@@"+ ++xt};function Ft(e,t){(typeof e=="undefined"?"undefined":gt(e))==="object"&&(typeof t=="undefined"?(t=e,e=Ue()):(t={state:e,transitions:t},e=Ue()));var r={name:e};(0,Ut.default)(t);var n=t,o=n.state,a=n.transitions,_=function(d){for(var u=arguments.length,i=Array(u>1?u-1:0),s=1;s<u;s++)i[s-1]=arguments[s];return Wt.default.apply(void 0,[r,d].concat(i))},l=function(d){for(var u=arguments.length,i=Array(u>1?u-1:0),s=1;s<u;s++)i[s-1]=arguments[s];return qt.default.apply(void 0,[r,d].concat(i))};return r.state=o,r.transitions=a,(0,bt.default)(r,a,_,l),r}He.exports=F.default});var oe=R(h=>{"use strict";h.__esModule=!0;h.flush=Xt;h.getMapping=Bt;h.destroy=Qt;h.default=Zt;var xe=L(),Vt=y(),ne=Yt(Vt),ae=A();function Yt(e){return e&&e.__esModule?e:{default:e}}var Kt=0,p=null,zt=function(){return"m"+ ++Kt},Jt=function(){p===null&&(p={},xe.Machine.addMiddleware({onStateChanged:function(){for(var r in p){var n=p[r],o=n.done,a=n.machines;a.map(function(_){return _.name}).indexOf(this.name)>=0&&o&&o.apply(void 0,a)}}}))};function Xt(){p=null}function Bt(){return p}function Qt(e){for(var t in p)p[t].machines=p[t].machines.filter(function(r){var n=r.name;return n!==e}),(0,ne.default)(ae.MIDDLEWARE_MACHINE_DISCONNECTED,null,p[t].machines),p[t].machines.length===0&&delete p[t]}function Zt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.meta;Jt();var r=function(){for(var o=arguments.length,a=Array(o),_=0;_<o;_++)a[_]=arguments[_];var l=a.map(function(d){return xe.Machine.get(d)}),f=function(u,i,s){var c=zt();return!i&&(p[c]={done:u,machines:l}),!s&&u&&u.apply(void 0,l),function(){(0,ne.default)(ae.MIDDLEWARE_MACHINE_DISCONNECTED,null,l,t),p&&p[c]&&delete p[c]}};return(0,ne.default)(ae.MIDDLEWARE_MACHINE_CONNECTED,null,l,t),{map:f,mapOnce:function(u){return f(u,!0)},mapSilent:function(u){return f(u,!1,!0)}}};return{with:r}}});var ue=R((V,Fe)=>{"use strict";V.__esModule=!0;V.default=$t;function $t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{__type:"call",func:e,args:r}}Fe.exports=V.default});var L=R(K=>{"use strict";K.__esModule=!0;K.Machine=void 0;var kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt=be(),er=Y(jt),O=A(),ie=oe(),tr=Y(ie),rr=ue(),nr=Y(rr),ar=y(),or=Y(ar);function Y(e){return e&&e.__esModule?e:{default:e}}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ir=function(){function e(){ur(this,e),this.machines={},this.middlewares=[],this.connect=tr.default,this.call=nr.default}return e.prototype.create=function(r,n){var o=this,a=(0,er.default)(r,n,this.middlewares);return this.machines[a.name]=a,(0,or.default)(O.MIDDLEWARE_MACHINE_CREATED,a,a),a.destroy=function(){return o.destroy(a)},a},e.prototype.get=function(r){if((typeof r=="undefined"?"undefined":kt(r))==="object"&&(r=r.name),this.machines[r])return this.machines[r];throw new Error((0,O.ERROR_MISSING_MACHINE)(r))},e.prototype.flush=function(){this.machines={},this.middlewares=[],(0,ie.flush)()},e.prototype.addMiddleware=function(r){Array.isArray(r)?this.middlewares=this.middlewares.concat(r):this.middlewares.push(r),r.__initialize&&r.__initialize(this),r[O.MIDDLEWARE_REGISTERED]&&r[O.MIDDLEWARE_REGISTERED]()},e.prototype.destroy=function(r){var n=r;if(typeof r=="string"&&(n=this.machines[r],!n))throw new Error((0,O.ERROR_MISSING_MACHINE)(r));delete this.machines[n.name],(0,ie.destroy)(n.name)},e}(),Ve=new ir;K.Machine=Ve;typeof window!="undefined"&&(window[O.DEVTOOLS_KEY]=Ve)});var Ke=R(I=>{"use strict";I.__esModule=!0;I.connect=I.call=void 0;var fr=ue(),sr=Ye(fr),lr=oe(),dr=Ye(lr);function Ye(e){return e&&e.__esModule?e:{default:e}}I.call=sr.default;I.connect=dr.default});var fe={};Qe(fe,{connect:()=>Er});var ze=de(L()),Je=de(Ke());var Xe="default",Be=ze.Machine.create(m({name:Xe},ce),{[Xe]:{toggle({state:e},t){return z(m({},e),{todos:e.todos.map(r=>(r.id===t&&(r.done=!r.done),r))})},add({state:e},t){return z(m({},e),{todos:[{text:t,done:!1,id:_e()},...e.todos]})}}}),Er=(e=J,t=J)=>{(0,Je.connect)().with(Be.name).map(r=>e(r.state)),t(Be)};Ee("Stent",fe,Re);
//# sourceMappingURL=state-stent.js.map
