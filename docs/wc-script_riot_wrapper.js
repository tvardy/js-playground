(()=>{function xe(t,e){return typeof t===e}function B(t){return xe(t,"function")}function Ut(t){return!Me(t)&&t.constructor===Object}function Me(t){return t==null}var T=new Map,Dt=Symbol("riot-component"),yt=new Set,w="is";var S="mount",R="update",j="unmount",F="shouldUpdate",H="onBeforeMount",k="onMounted",V="onBeforeUpdate",$="onUpdated",z="onBeforeUnmount",G="onUnmounted",h="props",d="state",X="slots",q="root",g=Symbol("pure"),J=Symbol("is_updating"),y=Symbol("parent"),P=Symbol("attributes"),I=Symbol("template");function It(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function W(t){return t.replace(/-(\w)/g,(e,n)=>n.toUpperCase())}function Yt(t){return Array.from(t.attributes).reduce((e,n)=>(e[W(n.name)]=n.value,e),{})}function f(){return this}function Lt(t,e){return e.forEach(n=>{t[n]=t[n].bind(t)}),t}function _(t){return B(t)?t.prototype&&t.prototype.constructor?new t:t():t}function A(t){throw new Error(t)}function vt(t){let e=new Map,n=r=>(e.has(r)||e.set(r,t.call(this,r)))&&e.get(r);return n.cache=e,n}function mt(t){return t.reduce((e,n)=>{let{value:r,type:o}=n;switch(!0){case(!n.name&&o===0):return{...e,...r};case o===3:e.value=n.value;break;default:e[W(n.name)]=n.value}return e},{})}function O(t,e,n,r={}){return Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!1,configurable:!0,...r}),t}function Z(t,e,n){return Object.entries(e).forEach(([r,o])=>{O(t,r,o,n)}),t}function Q(t,e){return Object.entries(e).forEach(([n,r])=>{t[n]||(t[n]=r)}),t}var tt=Object.freeze({[S]:f,[R]:f,[j]:f});var Kt=Object.assign({},tt,{clone:f,createDOM:f});function lt(t){return t.replace(/-(\w)/g,(e,n)=>n.toUpperCase())}function Bt(t,e){e.replaceChildren(...t.childNodes)}function ft(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function wt(t){for(let e=0;e<t.length;e++)x(t[e])}var x=t=>t&&t.parentNode&&t.parentNode.removeChild(t),N=(t,e)=>e&&e.parentNode&&e.parentNode.insertBefore(t,e),Rt=(t,e)=>e&&e.parentNode&&e.parentNode.replaceChild(t,e);var cr=Symbol("riot-component");var jt=Symbol("pure"),ur=Symbol("is_updating"),Ft=Symbol("parent"),ar=Symbol("attributes"),pr=Symbol("template");var ht={EACH:0,IF:1,SIMPLE:2,TAG:3,SLOT:4};var dt={ATTRIBUTE:0,EVENT:1,TEXT:2,VALUE:3};function Et(t,e,n,r={}){return Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!1,configurable:!0,...r}),t}function Ht(t,e){return typeof t===e}function Tt(t){let e=t.ownerSVGElement;return!!e||e===null}function Y(t){return t.tagName.toLowerCase()==="template"}function kt(t){return Ht(t,"function")}function Vt(t){return Ht(t,"boolean")}function $t(t){return!Ot(t)&&t.constructor===Object}function Ot(t){return t==null}function zt(t){throw new Error(t)}function Gt(t){let e=new Map,n=r=>(e.has(r)||e.set(r,t.call(this,r)))&&e.get(r);return n.cache=e,n}function Xt(t){return t.reduce((e,n)=>{let{value:r,type:o}=n;switch(!0){case(!n.name&&o===0):return{...e,...r};case o===3:e.value=n.value;break;default:e[lt(n.name)]=n.value}return e},{})}var Ue=Symbol(),De=Symbol();function ye(){let t=document.createTextNode(""),e=document.createTextNode("");return t[Ue]=!0,e[De]=!0,{head:t,tail:e}}function Ie(t){let e=t.dom.cloneNode(!0),{head:n,tail:r}=ye();return{avoidDOMInjection:!0,fragment:e,head:n,tail:r,children:[n,...Array.from(e.childNodes),r]}}var Ye=(t,e,n,r)=>{let o=e.length,i=t.length,s=o,c=0,u=0,p=null;for(;c<i||u<s;)if(i===c){let a=s<o?u?n(e[u-1],-0).nextSibling:n(e[s-u],0):r;for(;u<s;)N(n(e[u++],1),a)}else if(s===u)for(;c<i;)(!p||!p.has(t[c]))&&x(n(t[c],-1)),c++;else if(t[c]===e[u])c++,u++;else if(t[i-1]===e[s-1])i--,s--;else if(t[c]===e[s-1]&&e[u]===t[i-1]){let a=n(t[--i],-1).nextSibling;N(n(e[u++],1),n(t[c++],-1).nextSibling),N(n(e[--s],1),a),t[i]=e[s]}else{if(!p){p=new Map;let a=u;for(;a<s;)p.set(e[a],a++)}if(p.has(t[c])){let a=p.get(t[c]);if(u<a&&a<s){let m=c,l=1;for(;++m<i&&m<s&&p.get(t[m])===a+l;)l++;if(l>a-u){let E=n(t[c],0);for(;u<a;)N(n(e[u++],1),E)}else Rt(n(e[u++],1),n(t[c++],-1))}else c++}else x(n(t[c++],-1))}return e},qt=Symbol("unmount"),Le={nodes:[],mount(t,e){return this.update(t,e)},update(t,e){let{placeholder:n,nodes:r,childrenMap:o}=this,i=t===qt?null:this.evaluate(t),s=i?Array.from(i):[],{newChildrenMap:c,batches:u,futureNodes:p}=we(s,t,e,this);return Ye(r,p,ve(Array.from(o.values()),e),n),u.forEach(a=>a()),this.childrenMap=c,this.nodes=p,this},unmount(t,e){return this.update(qt,e),this}};function ve(t,e){return(n,r)=>{if(r<0){let o=t[t.length-1];if(o){let{template:i,nodes:s,context:c}=o;s.pop(),s.length||(t.pop(),i.unmount(c,e,null))}}return n}}function Ke(t,e){return t?!t(e):!1}function Be(t,{itemName:e,indexName:n,index:r,item:o}){return Et(t,e,o),n&&Et(t,n,r),t}function we(t,e,n,r){let{condition:o,template:i,childrenMap:s,itemName:c,getKey:u,indexName:p,root:a,isTemplateTag:m}=r,l=new Map,E=[],v=[];return t.forEach((_e,ut)=>{let D=Be(Object.create(e),{itemName:c,indexName:p,index:ut,item:_e}),at=u?u(D):ut,pt=s.get(at),K=[];if(Ke(o,D))return;let gt=!pt,C=pt?pt.template:i.clone(),Pt=C.el||a.cloneNode(),bt=m&&gt?Ie(C):C.meta;gt?E.push(()=>C.mount(Pt,D,n,bt)):E.push(()=>C.update(D,n)),m?K.push(...bt.children):K.push(Pt),s.delete(at),v.push(...K),l.set(at,{nodes:K,template:C,context:D,index:ut})}),{newChildrenMap:l,batches:E,futureNodes:v}}function Re(t,{evaluate:e,condition:n,itemName:r,indexName:o,getKey:i,template:s}){let c=document.createTextNode(""),u=t.cloneNode();return N(c,t),x(t),{...Le,childrenMap:new Map,node:t,root:u,condition:n,evaluate:e,isTemplateTag:Y(u),template:s.createDOM(t),getKey:i,indexName:o,itemName:r,placeholder:c}}var je={mount(t,e){return this.update(t,e)},update(t,e){let n=!!this.evaluate(t),r=!this.value&&n,o=this.value&&!n,i=()=>{let s=this.node.cloneNode();N(s,this.placeholder),this.template=this.template.clone(),this.template.mount(s,t,e)};switch(!0){case r:i();break;case o:this.unmount(t);break;default:n&&this.template.update(t,e)}return this.value=n,this},unmount(t,e){return this.template.unmount(t,e,!0),this}};function Fe(t,{evaluate:e,template:n}){let r=document.createTextNode("");return N(r,t),x(t),{...je,node:t,evaluate:e,placeholder:r,template:n.createDOM(t)}}var He=typeof Element>"u"?{}:Element.prototype,ke=Gt(t=>He.hasOwnProperty(t));function Ve(t,e){Object.entries(e).forEach(([n,r])=>te(t,{name:n},r))}function $e(t,e,n){let r=e?Object.keys(e):[];Object.keys(n).filter(o=>!r.includes(o)).forEach(o=>t.removeAttribute(o))}function ze(t){return t===!0||["string","number"].includes(typeof t)}function Ge(t){return!t&&t!==0}function te(t,{name:e},n,r){if(!e){r&&$e(t,n,r),n&&Ve(t,n);return}!ke(e)&&(Vt(n)||$t(n)||kt(n))&&(t[e]=n),Ge(n)?t.removeAttribute(e):ze(n)&&t.setAttribute(e,Xe(e,n))}function Xe(t,e){return e===!0?t:e}var qe=/^on/,Je=t=>Array.isArray(t)?t:[t,!1],We={handleEvent(t){this[t.type](t)}},ee=new WeakMap,Ze=t=>{let e=Object.create(We);return ee.set(t,e),e};function Qe(t,{name:e},n){let r=e.replace(qe,""),o=ee.get(t)||Ze(t),[i,s]=Je(n),c=o[r],u=c&&!i,p=i&&!c;u&&t.removeEventListener(r,o),p&&t.addEventListener(r,o,s),o[r]=i}function ne(t){return Ot(t)?"":t}var tn=(t,e)=>{let n=t.childNodes[e];if(n.nodeType===Node.COMMENT_NODE){let r=document.createTextNode("");return t.replaceChild(r,n),r}return n};function en(t,e,n){t.data=ne(n)}function nn(t,e,n){t.value=ne(n)}var rn={[0]:te,[1]:Qe,[2]:en,[3]:nn},on={mount(t){return this.value=this.evaluate(t),_t(this,this.value),this},update(t){let e=this.evaluate(t);return this.value!==e&&(_t(this,e),this.value=e),this},unmount(){return this.type===1&&_t(this,null),this}};function _t(t,e){return rn[t.type](t.node,t,e,t.value)}function Mt(t,e){return{...on,...e,node:e.type===2?tn(t,e.childNodeIndex):t}}function sn(t,e,n){return e.reduce((r,o)=>({...r,[o]:i=>t.map(s=>s[o](i))&&n}),{})}function cn(t,{expressions:e}){return{...sn(e.map(n=>Mt(t,n)),["mount","update","unmount"])}}function un(t,e,n){if(!t||!t.length)return n;let r=t.map(o=>({...o,value:o.evaluate(e)}));return Object.assign(Object.create(n||null),Xt(r))}var Jt=(t,e)=>t[Ft]||e,an={attributes:[],getTemplateScope(t,e){return un(this.attributes,t,e)},mount(t,e){let n=t.slots?t.slots.find(({id:i})=>i===this.name):!1,{parentNode:r}=this.node,o=Jt(t,e);return this.template=n&&nt(n.html,n.bindings).createDOM(r),this.template&&(ft(this.node),this.template.mount(this.node,this.getTemplateScope(t,o),o),this.template.children=Array.from(this.node.childNodes)),re(this.node),x(this.node),this},update(t,e){if(this.template){let n=Jt(t,e);this.template.update(this.getTemplateScope(t,n),n)}return this},unmount(t,e,n){return this.template&&this.template.unmount(this.getTemplateScope(t,e),null,n),this}};function re(t){let e=t&&t.firstChild;!e||(N(e,t),re(t))}function pn(t,{name:e,attributes:n}){return{...an,attributes:n,node:t,name:e}}function mn(t,e=[],n=[]){return t?t({slots:e,attributes:n}):nt(fn(e),[...ln(e),{expressions:n.map(r=>({type:0,...r}))}])}function ln(t){return t.reduce((e,{bindings:n})=>e.concat(n),[])}function fn(t){return t.reduce((e,n)=>e+n.html,"")}var hn={mount(t){return this.update(t)},update(t,e){let n=this.evaluate(t);return n&&n===this.name?this.tag.update(t):(this.unmount(t,e,!0),this.name=n,this.tag=mn(this.getComponent(n),this.slots,this.attributes),this.tag.mount(this.node,t)),this},unmount(t,e,n){return this.tag&&this.tag.unmount(n),this}};function dn(t,{evaluate:e,getComponent:n,slots:r,attributes:o}){return{...hn,node:t,evaluate:e,slots:r,attributes:o,getComponent:n}}var Wt={[1]:Fe,[2]:cn,[0]:Re,[3]:dn,[4]:pn};function En(t,e){return t.map(n=>n.type===2?{...n,childNodeIndex:n.childNodeIndex+e}:n)}function Tn(t,e,n){let{selector:r,type:o,redundantAttribute:i,expressions:s}=e,c=r?t.querySelector(r):t;i&&c.removeAttribute(i);let u=s||[];return(Wt[o]||Wt[2])(c,{...e,expressions:n&&!r?En(u,n):u})}function On(t,e){let n=Y(e)?e:document.createElement("template");return n.innerHTML=t,n.content}function Nn(t,e){return e.ownerDocument.importNode(new window.DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,"application/xml").documentElement,!0)}function _n(t,e){return Tt(t)?Nn(e,t):On(e,t)}function xn(t,e){switch(!0){case Tt(t):Bt(e,t);break;case Y(t):t.parentNode.replaceChild(e,t);break;default:t.appendChild(e)}}function Mn(t,e){return e&&(typeof e=="string"?_n(t,e):e)}function An(t,e,n){let r=Array.from(t.childNodes);return Math.max(r.indexOf(e),r.indexOf(n.head)+1,0)}var Cn={createDOM(t){return this.dom=this.dom||Mn(t,this.html)||document.createDocumentFragment(),this},mount(t,e,n,r={}){t||zt("Please provide DOM node to mount properly your template"),this.el&&this.unmount(e);let{fragment:o,children:i,avoidDOMInjection:s}=r,{parentNode:c}=i?i[0]:t,u=Y(t),p=u?An(c,t,r):null;this.createDOM(t);let a=o||this.dom.cloneNode(!0);return this.el=u?c:t,this.children=u?i||Array.from(a.childNodes):null,!s&&a&&xn(t,a),this.bindings=this.bindingsData.map(m=>Tn(this.el,m,p)),this.bindings.forEach(m=>m.mount(e,n)),this.meta=r,this},update(t,e){return this.bindings.forEach(n=>n.update(t,e)),this},unmount(t,e,n=!1){let r=this.el;if(!r)return this;switch(this.bindings.forEach(o=>o.unmount(t,e,n)),!0){case(r[jt]||n===null):break;case Array.isArray(this.children):wt(this.children);break;case!n:ft(r);break;case!!n:x(r);break}return this.el=null,this},clone(){return{...this,meta:{},el:null}}};function nt(t,e=[]){return{...Cn,html:t,bindingsData:e}}function oe(t){return t===void 0&&(t={}),Object.entries(_(t)).reduce((e,n)=>{let[r,o]=n;return e[It(r)]=L(o),e},{})}function ie(t,e){let n=oe(e.exports?e.exports.components:{});return t(nt,dt,ht,r=>r===e.name?se(e):n[r]||T.get(r))}var rt=(t,e)=>t[Dt]=e;function ot(t){return[S,R,j].reduce((e,n)=>(e[n]=t(n),e),{})}function ce(t,e){let{slots:n,attributes:r,props:o,css:i,template:s}=e;s&&A("Pure components can not have html"),i&&A("Pure components do not have css");let c=Q(t({slots:n,attributes:r,props:o}),tt);return ot(u=>function(){for(var p=arguments.length,a=new Array(p),m=0;m<p;m++)a[m]=arguments[m];if(u===S){let[l]=a;O(l,g,!0),rt(l,c)}return c[u](...a),c})}function b(t){return Array.isArray(t)?t:/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&typeof t.length=="number"?Array.from(t):[t]}function M(t,e){return b(typeof t=="string"?(e||document).querySelectorAll(t):t)}var ue=Object.freeze({$(t){return M(t,this.root)[0]},$$(t){return M(t,this.root)}});var ae=Object.freeze({[F]:f,[H]:f,[k]:f,[V]:f,[$]:f,[z]:f,[G]:f});var pe=t=>t.length===1?t[0]:t;function Sn(t,e,n){let r=typeof e=="string"?[e]:e;return pe(b(t).map(o=>pe(r.map(i=>o[n](i)))))}function it(t,e,n){let r=typeof e=="object"?e:{[e]:n},o=Object.keys(r);return b(t).forEach(i=>{o.forEach(s=>i.setAttribute(s,r[s]))}),t}function me(t,e){return Sn(t,e,"getAttribute")}var U=new Map,gn="style[riot]",Pn=(t=>()=>t||(t=M(gn)[0]||document.createElement("style"),it(t,"type","text/css"),t.parentNode||document.head.appendChild(t),t))(),le={CSS_BY_NAME:U,add(t,e){return U.has(t)||(U.set(t,e),this.inject()),this},inject(){return Pn().innerHTML=[...U.values()].join(`
`),this},remove(t){return U.has(t)&&(U.delete(t),this.inject()),this}};function st(t,...e){return(...n)=>(n=[...e,...n],n.length<t.length?st(t,...n):t(...n))}function ct(t){return me(t,w)||t.tagName.toLowerCase()}function fe(t,e){ct(t)!==e&&it(t,w,e)}function At(t,e){return Object.assign({},t,_(e))}function he(t,e){return e===void 0&&(e={}),Object.assign({},Yt(t),_(e))}function de(t,e){e===void 0&&(e=[]);let n=e.map(o=>Mt(t,o)),r={};return Object.assign(r,Object.assign({expressions:n},ot(o=>i=>(n.forEach(s=>s[o](i)),r))))}function Ee(t){return[...yt].reduce((e,n)=>n(e)||e,t)}function Te(t,e){let{slots:n,attributes:r,props:o}=e;return Lt(Ee(Z(Ut(t)?Object.create(t):t,{mount(i,s,c){return s===void 0&&(s={}),O(i,g,!1),this[y]=c,this[P]=de(i,r).mount(c),O(this,h,Object.freeze(Object.assign({},he(i,o),mt(this[P].expressions)))),this[d]=At(this[d],s),this[I]=this.template.createDOM(i).clone(),rt(i,this),t.name&&fe(i,t.name),O(this,q,i),O(this,X,n),this[H](this[h],this[d]),this[I].mount(i,this,c),this[k](this[h],this[d]),this},update(i,s){i===void 0&&(i={}),s&&(this[y]=s,this[P].update(s));let c=mt(this[P].expressions);if(this[F](c,this[h])!==!1)return O(this,h,Object.freeze(Object.assign({},this[h],c))),this[d]=At(this[d],i),this[V](this[h],this[d]),this[J]||(this[J]=!0,this[I].update(this,this[y])),this[$](this[h],this[d]),this[J]=!1,this},unmount(i){return this[z](this[h],this[d]),this[P].unmount(),this[I].unmount(this,this[y],i===null?null:!i),this[G](this[h],this[d]),this}})),Object.keys(t).filter(i=>B(t[i])))}function Oe(t){let{css:e,template:n,componentAPI:r,name:o}=t;return e&&o&&le.add(o,e),st(Te)(Z(Q(r,Object.assign({},ae,{[h]:{},[d]:{}})),Object.assign({[X]:null,[q]:null},ue,{name:o,css:e,template:n})))}function L(t){let{css:e,template:n,exports:r,name:o}=t,i=n?ie(n,t):Kt;return s=>{let{slots:c,attributes:u,props:p}=s;if(r&&r[g])return ce(r,{slots:c,attributes:u,props:p,css:e,template:n});let a=_(r)||{},m=Oe({css:e,template:i,componentAPI:a,name:o})({slots:c,attributes:u,props:p});return{mount(l,E,v){return m.mount(l,v,E)},update(l,E){return m.update(E,l)},unmount(l){return m.unmount(l)}}}}var se=vt(L);function Ct(t,e){let{css:n,template:r,exports:o}=e;return T.has(t)&&A(`The component "${t}" was already registered`),T.set(t,L({name:t,css:n,template:r,exports:o})),T}function Ne(t,e,n,r){let o=n||ct(t);return T.has(o)||A(`The component named "${o}" was never registered`),T.get(o)({props:e,slots:r}).mount(t)}function St(t,e,n){return M(t).map(r=>Ne(r,e,n))}var bn=(t,e="beforeend")=>{let n=t.dataset.target,r=n?document.querySelector(n):document.body,o=t.text.trim().replace(/\n\s+/gm,"");r.insertAdjacentHTML(e,o)},Un={css:'simple-component-riot,[is="simple-component-riot"]{ display: block; padding: 2em; background: lightgreen; color: var(--shade2); text-align: center; cursor: pointer; } simple-component-riot.active,[is="simple-component-riot"].active{ background: var(--shade1); color: var(--shade0); } simple-component-riot.active > *,[is="simple-component-riot"].active > *{ color: inherit; } simple-component-riot h1,[is="simple-component-riot"] h1{ color: var(--shade1); } simple-component-riot p,[is="simple-component-riot"] p{ font-size: 0.8em; text-transform: uppercase; }',exports:{onBeforeMount(){this.state={count:0,active:!1}},onMounted(){this.$(".children").appendChild(this.root.children[0])},handleClick(){let{count:t,active:e}=this.state;this.update({count:t+1,active:!e})}},template:function(t,e,n,r){return t('<h3 expr0="expr0"> </h3><pre expr1="expr1"> </pre><div class="children"></div>',[{expressions:[{type:e.ATTRIBUTE,name:"class",evaluate:function(o){return o.state.active?"active":null}},{type:e.EVENT,name:"onclick",evaluate:function(o){return o.handleClick}}]},{redundantAttribute:"expr0",selector:"[expr0]",expressions:[{type:e.TEXT,childNodeIndex:0,evaluate:function(o){return o.props.title}}]},{redundantAttribute:"expr1",selector:"[expr1]",expressions:[{type:e.TEXT,childNodeIndex:0,evaluate:function(o){return["Clicked: ",o.state.count," times"].join("")}}]}])},name:"simple-component-riot"};Ct("simple-component-riot",Un);bn(document.currentScript);St("simple-component-riot");})();
/* Riot WIP, @license MIT */
//# sourceMappingURL=wc-script_riot_wrapper.js.map
