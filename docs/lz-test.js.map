{
  "version": 3,
  "sources": ["../src/js/components/src/js/components/lz-test.svelte", "../node_modules/@78nine/sideworker/sideworker.js", "../src/js/tools/FakeJSONDataWorker.js", "../src/js/lz-test.js"],
  "sourcesContent": ["<script>\n  import lzw from 'lzwcompress'\n  import { pack, compress } from '../utils/lzip.js'\n  import worker from '../tools/FakeJSONDataWorker.js'\n\n  let processing\n  let ready\n\n  function handleKeyDown (e) {\n    if (!e.altKey && !e.ctrlKey && !e.metaKey && !e.shiftKey) {\n      data = null\n    }\n\n    if (e.which === 13) {\n      e.preventDefault()\n      run()\n    }\n  }\n\n  async function run () {\n    numberOfRecords = parseInt(numberOfRecords)\n\n    if (numberOfRecords > 0) {\n      data = []\n\n      data = await worker.run.generate(numberOfRecords)\n    }\n  }\n\n  let numberOfRecords = 0\n  let data = null\n\n  const values = {\n    json: null,\n    jsonPretty: null,\n    10: null,\n    32: null\n  }\n  const lengths = {\n    json: null,\n    10: null,\n    32: null\n  }\n  const percentage = {\n    10: null,\n    32: null\n  }\n\n  $: processing = Array.isArray(data) && !data.length\n  $: ready = Array.isArray(data) && data.length\n\n  $: values.json = JSON.stringify(data)\n  $: values.jsonPretty = JSON.stringify(data, null, 2)\n  $: values['10'] = lzw.pack(values.json).join(compress.sep)\n  $: values['32'] = pack(data)\n\n  $: lengths.json = values.json.length\n  $: lengths['10'] = values['10'].length\n  $: lengths['32'] = values['32'].length\n\n  $: percentage['10'] = ((lengths['10'] / lengths.json) * 100).toFixed(2)\n  $: percentage['32'] = ((lengths['32'] / lengths.json) * 100).toFixed(2)\n</script>\n\n<div class=\"lz-input\">\n  How many records to create:\n  <span contenteditable on:keydown={handleKeyDown} bind:innerHTML={numberOfRecords}>\n    {numberOfRecords}\n  </span>\n</div>\n\n{#if processing}\n  <pre class=\"lz-result\">creating data...</pre>\n{/if}\n\n{#if ready}\n  <pre\n    class=\"lz-result\">\nNumber of records: { numberOfRecords }\nJSON string length: { lengths.json }\nZipped decimals string length: { lengths['10'] } ({ percentage['10'] } %)\nZipped 32-bit string length: { lengths['32'] } ({ percentage['32'] } %)\n</pre>\n  <div class=\"lz-data\">\n    <details>\n      <summary>toggle JSON data</summary>\n      <pre>{ values.jsonPretty }</pre>\n    </details>\n  </div>\n  <div class=\"lz-data wrap\">\n    <details>\n      <summary>toggle LZipped decimal data</summary>\n      <pre>{ values[10] }</pre>\n    </details>\n  </div>\n  <div class=\"lz-data wrap\">\n    <details>\n      <summary>toggle LZipped 32-bit data</summary>\n      <pre>{ values['32'] }</pre>\n    </details>\n  </div>\n{/if}\n", "const _uuid = () => URL.createObjectURL(new Blob()).split('/').pop()\n\nfunction SideWorker({ debug, init } = {}, ...args) {\n  const blobStr = insideWorker.toString()\n    .replace(\n      /^\\(?([a-z]+)\\)?\\s*=>\\s*{/,\n      (_, p) => `const ${p}=${debug?1:0};`\n    )\n    .replace(/}$/, '')\n\n  const blobUrl = URL.createObjectURL(new Blob([blobStr], { type: 'text/javascript' }))\n\n  this.worker = new Worker(blobUrl)\n  URL.revokeObjectURL(blobUrl)\n\n  this.func = null\n  this._cb = new Map()\n  this.run = {}\n  this.callFunction = (name, ...args) => {\n    this.worker.postMessage(name)\n    this.worker.postMessage(args)\n  }\n\n  this.define = (name, func) => {\n    this.callFunction('define', name, func.toString())\n    this.run[name] = (...args) => {\n      return new Promise((resolve, reject) => {\n        const uuid = `${name}:${_uuid()}`\n        this._cb.set(uuid, { resolve, reject });\n\n        this.callFunction(uuid, ...args)\n      })\n    }\n  }\n\n  this.worker.addEventListener('message', e => {\n    if (!this.func) {\n      this.func = e.data\n    } else {\n      const [ err, ...response ] = e.data\n      const handler = this._cb.get(this.func)\n\n      !err ? handler.resolve(...response) : handler.reject(err)\n\n      this._cb.delete(this.func);\n      this.func = null\n    }\n  })\n\n  if (init) {\n    this.define('init', init)\n    this.run.init(args)\n  }\n}\n\nexport default SideWorker\n\nconst insideWorker = (debug) => {\n  if (debug) {\n    console.debug('SideWorker initialised.')\n  }\n\n  const ERROR_NOT_DEFINED = 'ERROR! FUNCTION NOT DEFINED!'\n  const SEPARATOR = ':'\n  const _split = arg => arg.split(SEPARATOR)\n  const _join = (...args) => args.join(SEPARATOR)\n\n  function SideWorker() {\n    this.func = false\n    this.define = (name, strfunc) => {\n      const runner = new Function('return ' + strfunc)()\n\n      this[name] = (id, args) => {\n        self.postMessage(_join(name, id))\n\n        try {\n          const response = runner.apply(this, args)\n          self.postMessage([, response])\n        } catch (err) {\n          self.postMessage([err])\n        }\n\n        this.func = false\n      }\n    }\n  }\n\n  const worker = new SideWorker()\n\n  self.addEventListener('message', (e) => {\n    if (!worker.func) {\n      worker.func = e.data\n\n      const [ name ] = _split(e.data)\n\n      if (!worker[name]) {\n        console.error(ERROR_NOT_DEFINED, name)\n      }\n    } else {\n      const func = worker.func\n      const [ name, id ] = _split(func)\n\n      worker.func = false\n\n      if (debug) {\n        if(name === 'define') {\n          console.debug(`Defining \"${e.data[0]}\"`)\n        } else {\n          console.debug(`Calling \"${name}\" (id: ${id})`)\n        }\n      }\n\n      if (worker[name]) {\n        const data = (name === 'define' && !id) ? e.data : [id, e.data];\n        worker[name].apply(worker, data)\n      } else {\n        console.error(ERROR_NOT_DEFINED, worker[name])\n      }\n    }\n  })\n}\n", "/* global importScripts, faker */\nimport SideWorker from '@78nine/sideworker'\n\nconst worker = new SideWorker({\n  debug: true,\n  init: () => {\n    importScripts('https://unpkg.com/faker@5.5.3/dist/faker.min.js')\n\n    const { fake, datatype } = faker\n\n    function Record () {\n      return {\n        id: datatype.uuid(),\n        firstName: fake('{{name.firstName}}'),\n        lastName: fake('{{name.lastName}}'),\n        avatarUrl: fake('{{image.avatar}}'),\n        email: fake('{{internet.email}}'),\n        phone: fake('{{phone.phoneNumberFormat}}'),\n        isPremium: datatype.boolean(),\n        list: Array.from(\n          { length: datatype.number({ min: 10, max: 15 }) },\n          ChildRecord\n        )\n      }\n    }\n\n    function ChildRecord () {\n      return {\n        id: datatype.uuid(),\n        title: fake('{{commerce.productName}}'),\n        amount: datatype.number({ min: 10, max: 20 }),\n        created: new Date(fake('{{date.past}}')).toISOString()\n      }\n    }\n\n    self.generate = (length) => Array.from({ length }, Record)\n  }\n})\n\nworker.define('generate', (num) => self.generate(num))\n\nexport default worker\n", "import { LEVELS, Log } from './tools/Logger.js'\nimport App from './components/lz-test.svelte'\n\nif (process.env.NODE_ENV === 'development') {\n  Log.logLevel = LEVELS.DEBUG\n}\n\nconst app = new App({\n  target: document.getElementById('app'),\n  props: {\n    name: 'world'\n  }\n})\n\nif (app) {\n  Log.debug('Svelte working fine')\n}\n\nexport default app\n"],
  "mappings": "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",
  "names": []
}
